<template name="project">
	<style>
		.col-md-4,.col-md-12{
			padding-left: 0px;
		}
	</style>
	<div class="col-md-9">
		<h1>Project: {{project.title}}</h1>
		<div class="col-md-12" style="min-height:50px;margin-top:30px;font-size:16px">
			<div class="col-md-4">
				Created On: {{project.created_on}}
			</div>
			<div class="col-md-4">
				Due On: {{project.due_on}}
			</div>
			<div class="col-md-4">
				Completed On: {{project.completed_on}}
			</div>
		</div>
		<h2>Tasks</h2>
		<div class="col-md-12"><a href="/newtask/{{project._id}}" class="btn btn-success">Add Task</a></div>
		{{> reactiveTable fields=fields collection=todo showFilter=false}}
<!-- 		<h2>Tasks Completed</h2>
		{{> reactiveTable fields=fields collection=completed showFilter=false}}-->
	</div>
	<div class="col-md-3 bg-info conv-col" style="background:#eee">
		<h3>Conversation</h3>
		<form class="add-conv">
			<label>Add Note</label>
			<textarea name="text" class="form-control"></textarea>
			<input type="submit" class="btn btn-success" value="Submit" style="margin-top:10px">
		</form>
		{{# each convs}}
			<div class="conv" style="padding-left:5px;">
				<p style="margin-bottom:2px">{{{text}}}</p>
				<p><strong>{{user}}</strong> <i>{{formatDateTime date}}</i></p>
			</div>
		{{/each}}
	</div>
	
	<script type="text/javascript">
		$(function(){
			$(".conv-col").height($("body").height());
		})	
	</script>
</template>

<template name="projects">
	<h1>Projects</h1>
	{{> reactiveTable fields=fields collection=projects}}
</template>

<template name="taskActions">
	<a href="/edittask/{{_id}}" class="btn btn-info">Edit</a>
	{{#unless completed_on}}
	<a href="#" class="btn btn-success done"><i class="glyphicon glyphicon-ok"></i></a>
	{{/unless}}
</template>

<template name="newproject">
	<style>
		.col-md-6{
			padding-left: 0px;
		}
	</style>
	<div class="col-md-8 floating card">
		<h1>Add a Project</h1>
		<form class="new-project">

			<label>Title</label> <input type="text" name="title" class="form-control"/>
			<label>Description</label> <input type="text" name="description" class="form-control"/>
			<div class="col-md-6">
				<label>Status</label>
				<select class="form-control" name="status">
					<option value="Active">Active</option>
					<option value="Hold">Hold</option>
				</select>
			</div>
			<div class="col-md-6">
				<label>Due On</label>  <input type="text" name="due_on" class="form-control datepicker"/>
			</div>
			<label>Notes</label> 
			<br/>
			<textarea name="notes" class="notes form-control"></textarea>
			<br/>
			<input type="submit" class="btn btn-success" value="Submit"/>

		</form>
	</div>
</template>

<template name="editproject">
	<div class="col-md-8 floating card">
		<h1>Edit Project</h1>
		<form class="edit-project">

		<label>Title</label> <input type="text" name="title" class="form-control" value="{{project.title}}"/>
		<label>Description</label> <input type="text" name="description" class="form-control" value="{{project.description}}"/>
		<label>Status</label>
		<select class="form-control" name="status">
			<option value="Active" {{selectedIfEquals "Active" project.status}}>Active</option>
			<option value="Hold" {{selectedIfEquals "Hold" project.status}}>Hold</option>
		</select><label>Due On</label> <input type="date" name="due_on" class="form-control" value="{{project.due_on}}"/>
		<br/>
		<label>Notes</label> 
		<br/>
		<textarea name="notes" class="notes">{{project.notes}}</textarea>
		<br/>
		<input type="submit" class="btn btn-success" value="Submit"/>

		</form>
	</div>
</template>